# Anixart — Итоги года (Year Wrapped)

Веб-приложение для создания персональных итогов года на основе статистики пользователя Anixart.

## Технологии

- **Next.js 14** — React фреймворк
- **TypeScript** — типизация
- **Material UI (MUI)** — компоненты Material Design 3
- **html2canvas** — экспорт в PNG

## Установка

```bash
npm install
```

## Запуск

```bash
npm run dev
```

Приложение будет доступно по адресу [http://localhost:3000](http://localhost:3000)

## Сборка для продакшена

```bash
npm run build
npm start
```

## Функциональность

### Авторизация
- Вход через API Anixart (`api.anixart.tv`)
- Токен хранится в sessionStorage
- Автоматическая проверка токена при загрузке

### Экраны итогов года

1. **Приветственный экран** — аватар и никнейм пользователя
2. **Время в аниме** — общее количество часов и дней просмотра
3. **Активность** — просмотрено серий, завершено тайтлов, в избранном
4. **Топ релиз года** — самый просматриваемый релиз с обложкой и жанрами
5. **Предпочтения** — любимые жанры, аудитория и тематика
6. **Коллекции** — количество коллекций и самая активная
7. **Последний просмотр** — информация о последнем просмотренном эпизоде
8. **Финальный экран** — кнопка для скачивания PNG

### Настройки темы

- **Цветовая схема**: автоматическая, светлая, тёмная
- **Цветовая палитра**: 6 вариантов (по умолчанию, синий, фиолетовый, зелёный, оранжевый, красный)
- Настройки сохраняются в localStorage

### Экспорт в PNG

- Фиксированный размер: 1080×1920 px
- Экспорт текущего экрана
- Скачивание через браузер

## Структура проекта

```
├── app/                    # Next.js App Router
│   ├── layout.tsx         # Корневой layout
│   ├── page.tsx           # Главная страница
│   └── globals.css        # Глобальные стили
├── components/             # React компоненты
│   ├── screens/           # Экраны итогов года
│   ├── LoginDialog.tsx    # Диалог авторизации
│   ├── ThemeSettings.tsx  # Настройки темы
│   └── WrappedViewer.tsx  # Основной компонент просмотра
├── lib/                    # Утилиты и API
│   ├── api.ts             # API клиент для Anixart
│   ├── theme.ts            # Темизация Material 3
│   ├── utils.ts            # Вспомогательные функции
│   └── export.ts           # Экспорт в PNG
└── package.json
```

## API Endpoints

Приложение использует следующие эндпоинты API Anixart:

- `POST /auth/signIn` — авторизация
- `GET /profile/1?token=` — профиль пользователя
- `GET /history/{page}?token=` — история просмотров
- `GET /release/{id}?extended_mode=true&token=` — информация о релизе
- `GET /release/random?token=` — случайный релиз
- `GET /collection/all/profile/{profileId}/{page}?token=` — коллекции пользователя
- `GET /collection/{id}?token=` — информация о коллекции
- `GET /collection/{id}/releases/{page}?token=` — релизы в коллекции

## Особенности реализации

- **Только клиентская логика** — нет backend
- **Прямые запросы к API** — без SDK/wrapper'ов
- **Material 3** — использование официальных компонентов MUI
- **Адаптивный дизайн** — mobile first подход
- **Обработка ошибок** — graceful fallback при отсутствии данных

## Требования

- Node.js 18+
- Современный браузер с поддержкой ES2020

## Лицензия

Проект создан для Anixart.

